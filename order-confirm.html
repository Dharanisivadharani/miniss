<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Order Confirmation - ShopSmart</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; }
/* Navbar */
header { background:#fff; padding:15px 50px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.logo { font-size:24px; font-weight:bold; color:#007BFF; cursor:pointer; }
nav ul { list-style:none; display:flex; gap:20px; margin:0; padding:0; }
nav ul li a { text-decoration:none; color:#333; font-weight:bold; }
nav ul li a:hover { color:#007BFF; }
.user-icon { width:35px; height:35px; border-radius:50%; background:#007BFF; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:bold; cursor:pointer; margin-left:10px; }
/* Confirmation Container */
.confirm-container { max-width:800px; margin:50px auto; background:#fff; padding:30px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1);}
.confirm-container h2 { text-align:center; color:#28a745; margin-bottom:20px; }
.order-details { margin-bottom:30px; }
.order-details ul { list-style:none; padding-left:0; }
.order-details li { margin-bottom:10px; }
.back-home { background:#007BFF; color:#fff; border:none; padding:12px 25px; border-radius:50px; cursor:pointer; font-weight:bold; display:block; margin:0 auto; }
.back-home:hover { background:#00c6ff; }
</style>
</head>
<body>

<header>
  <div class="logo" onclick="location.href='index.html'">ShopSmart</div>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="about.html">About Us</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>
  <div style="display:flex; align-items:center;">
    <div class="user-icon" onclick="goProfile()">U</div>
    <div class="user-icon">ðŸ›’ <span id="cartCount">0</span></div>
  </div>
</header>

<div class="confirm-container">
  <h2>ðŸŽ‰ Thank You for Your Order!</h2>
  <div class="order-details" id="orderDetails"></div>
  <button class="back-home" onclick="window.print()">Print/Share Bill</button>
  <button class="back-home" style="margin-top:10px;" onclick="location.href='index.html'">Back to Home</button>
</div>

<script>
// Load last order
const orders = JSON.parse(localStorage.getItem("orders")) || [];
const orderDetailsDiv = document.getElementById("orderDetails");
if(orders.length>0){
  const lastOrder = orders[orders.length-1];
  let html = `<p><strong>Shop:</strong> ${lastOrder.shopName}</p>`;
  html += `<p><strong>Date & Time:</strong> ${lastOrder.dateTime}</p>`;
  html += "<ul>";
  lastOrder.cart.forEach(item=>{
    html += `<li>${item.name} x ${item.quantity} - â‚¹${(item.price*item.quantity).toLocaleString()}</li>`;
  });
  html += "</ul>";
  html += `<p><strong>Total:</strong> â‚¹${lastOrder.total.toLocaleString()}</p>`;
  html += `<p><strong>Payment Method:</strong> ${lastOrder.payment}</p>`;
  orderDetailsDiv.innerHTML = html;
} else {
  orderDetailsDiv.innerHTML = "<p>No order found.</p>";
}

// Navbar profile
function goProfile(){
  const user = JSON.parse(localStorage.getItem("loggedInUser"));
  if(user){ window.location.href="profile.html"; }
  else{ window.location.href="login.html"; }
}

// Cart count
function updateCartCount(){
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const count = cart.reduce((sum,item)=>sum+item.quantity,0);
  document.getElementById("cartCount").innerText = count;
}
updateCartCount();
</script>

</body>
</html>
